-- ServerScriptService/TDM_Server.server.lua local Players = game:GetService("Players") local Teams = game:GetService("Teams") local RS = game:GetService("ReplicatedStorage") local Remotes = RS:WaitForChild("Remotes") local RequestTeam = Remotes:WaitForChild("RequestTeam") local ScoreUpdate = Remotes:WaitForChild("ScoreUpdate") local Red = Teams:WaitForChild("Red") local Blue = Teams:WaitForChild("Blue") local POINTS_PER_KILL = 1 local TeamScores = { Red = 0, Blue = 0 } local function broadcast() ScoreUpdate:FireAllClients(TeamScores.Red, TeamScores.Blue) end local function setupLeaderstats(plr) local old = plr:FindFirstChild("leaderstats") if old then old:Destroy() end local ls = Instance.new("Folder") ls.Name = "leaderstats" ls.Parent = plr local k = Instance.new("IntValue") k.Name = "Kills" k.Value = 0 k.Parent = ls local d = Instance.new("IntValue") d.Name = "Deaths" d.Value = 0 d.Parent = ls end Players.PlayerAdded:Connect(function(plr) setupLeaderstats(plr) plr.Neutral = true plr.CharacterAdded:Connect(function(char) local hum = char:WaitForChild("Humanoid") hum.Died:Connect(function() -- victim death++ local ls = plr:FindFirstChild("leaderstats") if ls and ls:FindFirstChild("Deaths") then ls.Deaths.Value += 1 end -- award killer by creator tag (set by weapon) local tag = hum:FindFirstChild("creator") if tag and tag.Value and tag.Value:IsA("Player") then local killer = tag.Value if killer.Team and plr.Team and killer.Team ~= plr.Team then local kls = killer:FindFirstChild("leaderstats") if kls and kls:FindFirstChild("Kills") then kls.Kills.Value += 1 end if killer.Team == Red then TeamScores.Red += POINTS_PER_KILL elseif killer.Team == Blue then TeamScores.Blue += POINTS_PER_KILL end broadcast() end end end) end) task.defer(broadcast) end) RequestTeam.OnServerEvent:Connect(function(plr, teamName) if teamName == "Red" then plr.Team = Red plr.TeamColor = Red.TeamColor plr.Neutral = false elseif teamName == "Blue" then plr.Team = Blue plr.TeamColor = Blue.TeamColor plr.Neutral = false end if plr.Character then plr:LoadCharacter() end end)